<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
   <head>
      <meta http-equiv="expires" content="Tue, 20 Aug 1999 01:00:00 GMT" />
      <meta http-equiv="Pragma" content="no-cache" />
      <title>Data Map User Interface</title>
      <script type="text/javascript" src="../scripts/EmulationCode.js"></script>
      <script type = "text/javascript">
      //<!-- [CDATA[
   /***************************************************************************
   **
   ** Filename:  ADL_Data_UI.htm
   **
   ** File Description:  This file is the user interface for the SCO Test Suite
   **                    used for collecting data map information that is
   **                    typcially found in the in the imsmanifest.xml.  The
   **                    user interface is being provided to allow the SCO Test
   **                    Suite to collect this information without having a
   **                    manifest available.  The data collected will be used by
   **                    the Test Suite to initialize the cmi.objectives data
   **                    model element
   **
   ** Browser Compatibility:
   **
   ** Author: ADLI Project
   **
   ** Module/Package Name:  none
   ** Module/Package Description: none
   **
   ** Design Issues:
   **
   ** Implementation Issues:
   ** Known Problems:
   ** Side Effects:
   **
   ** References: ADL SCORM
   **
   ***************************************************************************
   
 
   **************************************************************************/

   var myDataMap = "";

   //*********************************************************************
   // Function: addToCollectionOfObjectives()
   //
   // Description: This function collects the data entered by the user and
   //              builds the final result to be sent back to the Test Suite
   //              Instructions.
   //
   //*********************************************************************
   function addToCollectionOfMaps()
   {
      var identifier = document.getElementById("datamap_id").value;
	  var mapread = document.getElementById("datamap_read").value;
	  var mapwrite = document.getElementById("datamap_write").value;
      var errMsg = "The following errors were encountered:\n";
      var errors = 0;

      // Check for errors first before
      if ( identifier == "" )
      {
         errors++;
         errMsg += "The DataMap Identifier is required\n";
      }
	  if ( mapread == "" )
      {
         errors++;
         errMsg += "The Read Shared Data must be set to true or false \n";
      }
	  if ( mapwrite == "" )
      {
         errors++;
         errMsg += "The Write Shared Data must be set to true or false \n";
      }

      if (errors != 0)
      {
         alert(errMsg);
      }
      else
      {
         myDataMap += "[5i]" + identifier;
         myDataMap += "[6a]" + mapread + "<>" + mapwrite;
         myDataMap += "[EODM]";
      }

      if (!errors)
      {
         clearForm();
      }
   }

   //*********************************************************************
   // Function: clearForm()
   //
   // Description: This function clears the objectives form.
   //
   //*********************************************************************
   function clearForm()
   {
      document.getElementById("datamap_id").value="";
      document.getElementById("datamap_read").value = "";
      document.getElementById("datamap_write").value = "";
   }

   //*********************************************************************
   // Function: done()
   //
   // Description: This function reports the objectives collected back to
   //              the opener window (Instructions page of the SCO Test
   //              Suite)
   //
   //*********************************************************************
   function done()
   {
      window.opener.datamapData = myDataMap;
      window.opener.doneAddingDataMap();
   }
//]]-->
      </script>
      <link rel="stylesheet" href="../css/CPTS_Styles.css" type="text/css" />
   </head>

   <body>

<!-- One of these "objectives_data" id attributes will need to be changed to meet xhtml w3c conformance, id attributes must be unique.-->
      <form id="objectives_data" action ="">
         <div id="objectives_data2">
         <!-- ID changed for conformance - duplicate ID not allowed  -->
            <table border="1">
               <tr>
                  <td class="cell">
                     <label class="products">DataMap ID (required): </label>
                  </td>
                  <td class="cell">
                     <input id="datamap_id" name="datamap_id" />
                  </td>
               </tr>

               <tr>
                  <td class="cell">
                 <label class="products">Read Shared Data:</label>
              </td>
               <td class="cell"><select name="datamap_read" id="datamap_read">
                 <option value="true">true</option>
                 <option value="false">false</option>
                              </select></td>
               </tr>

               <tr>
                  <td class="cell">
                 <label class="products">Write Shared Data :</label>
               </td>
                  <td class="cell">
                 <select name="datamap_write" id="datamap_write">
                   <option value="true">true</option>
                   <option value="false">false</option>
                 </select>
                  </td>
               </tr>

            <tr>
                  <td class="cell">
                     <input type="button" id="addDataMap"
                            name="addDataMap"
                            value="Set DataMap"
                            onclick="addToCollectionOfMaps()" />
                  </td>
                  <td class="cell">
                     <input type="button" id="doneAddingDataMap"
                            name="doneAddingDataMap"
                            value="Done"
                            onclick="done()" />
                  </td>
            </tr>
             </table>
         </div>
      </form>
      
   </body>
</html>
